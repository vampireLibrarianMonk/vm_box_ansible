---
# VM identity
vm_name: "gpu-3060-gaming"

# VM resources
vm_os_disk_size: "50G"
vm_ram_mb: 16384

# Total vCPUs exposed to guest
vm_vcpus: 8

# Explicit CPU topology (prevents scheduler thrash)
vm_cpu_sockets: 1
vm_cpu_dies: 1
vm_cpu_cores: 8
vm_cpu_threads: 1

###############################################################################
# LIBVIRT STORAGE (REQUIRED)
#
# libvirt runs QEMU as libvirt-qemu.
# All disks and ISOs must be readable from a libvirt-owned path.
###############################################################################

# Root directory for VM storage (libvirt-safe)
vm_storage_dir: "/var/lib/libvirt/images"

# Primary OS disk (vda)
vm_os_disk: "{{ vm_storage_dir }}/{{ vm_name }}.qcow2"

# Shared game data disk (vdb)
vm_game_disk: "{{ vm_storage_dir }}/game-data.qcow2"

###############################################################################
# IN-GUEST SCRIPT STAGING
#
# This is host-side only and does NOT need to be readable by QEMU.
###############################################################################

vm_in_guest_script_staging_dir: "{{ lookup('env','HOME') }}/vms/{{ vm_name }}-in-guest"

###############################################################################
# INSTALL MEDIA (ISO)
#
# ISOs must also live under libvirt storage for permission safety.
###############################################################################

vm_iso_path: "{{ vm_storage_dir }}/ubuntu-22.04.5-desktop-amd64.iso"
